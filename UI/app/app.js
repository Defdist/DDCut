!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=35)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("@material-ui/core")},function(e,t){e.exports=require("electron")},function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("@material-ui/core/styles/withStyles")},function(e,t){e.exports=require("@material-ui/core/styles")},function(e,t){e.exports=require("react-router-dom")},,,function(e,t){e.exports=require("@material-ui/core/styles/colorManipulator")},function(e,t){e.exports=require("custom-electron-titlebar")},function(e,t){e.exports=require("@material-ui/core/colors")},,function(e,t){e.exports=require("react-dom")},function(e,t){e.exports=require("react-hot-loader")},function(e,t){e.exports=require("@material-ui/lab/Slider")},function(e,t){e.exports=require("@material-ui/icons/lens")},function(e){e.exports={a:"2.10.0"}},,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(14),s=a.n(i),l=a(15);(()=>{const e=a(36).default;s.a.render(r.a.createElement(l.AppContainer,null,r.a.createElement(e,null)),document.getElementById("App"))})()},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(6),s=a(2),l=a(7),o=a(3),c=a.n(o);var d=Object(l.withRouter)(class extends n.Component{componentDidUpdate(e){this.props.location.pathname!==e.location.pathname&&window.scrollTo(0,0)}render(){return this.props.children}});var m=class extends n.Component{render(){return n.createElement("div",{id:"MainMenu"})}},p=a(1),u=a(5),g=a.n(u),h=a(4),b=a.n(h);function E(e){const{classes:t,open:a,onClose:n,jobs:i}=e,[l,o]=r.a.useState(0);return r.a.createElement(p.Dialog,{open:a,"aria-labelledby":"form-dialog-title",maxWidth:"sm",PaperProps:{style:{overflow:"hidden"}},fullWidth:!0},r.a.createElement(p.DialogTitle,null,r.a.createElement("center",null,"Job Selection")),r.a.createElement(p.DialogContent,null,r.a.createElement(p.Typography,null,"Select job to continue."),r.a.createElement("select",{size:"5",onChange:function(e){o(e.target.selectedIndex)},className:t.jobList},i.map((e,t)=>r.a.createElement("option",{key:t},e.title))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("textarea",{type:"text",disabled:!0,rows:"6",cols:"78",value:l>=0&&i.length>l?i[l].prompt:"",className:t.jobText}),r.a.createElement("br",null)),r.a.createElement(p.DialogActions,null,r.a.createElement(p.Grid,{container:!0,spacing:8,justify:"center"},r.a.createElement(p.Grid,{item:!0,xs:3},r.a.createElement(p.Button,{variant:"contained",className:t.cancel,onClick:function(e){n(e)},fullWidth:!0},"CANCEL")),r.a.createElement(p.Grid,{item:!0,xs:3},r.a.createElement(p.Button,{variant:"contained",className:t.select,color:"secondary",onClick:function(e){s.ipcRenderer.send("Jobs::SelectJob",l),n(e)},fullWidth:!0},"SELECT")))))}E.propTypes={classes:c.a.object.isRequired,open:c.a.bool.isRequired,onClose:c.a.func,jobs:c.a.array.isRequired};var f=g()(e=>({cancel:{marginTop:-e.spacing.unit,marginBottom:e.spacing.unit},select:{marginTop:-e.spacing.unit,marginBottom:e.spacing.unit},jobList:{width:"100%"},jobText:{width:"calc(100% - 6px)"}}))(E);function S(e){const{classes:t,open:a,onClose:n}=e,[i,l]=r.a.useState(!1),[o,c]=r.a.useState(new Array),[d,m]=r.a.useState(""),[u,g]=r.a.useState(""),[h,b]=r.a.useState(!1);function E(e){l(!1),c(new Array),m(""),g(""),b(!1),n(e)}return r.a.createElement(p.Dialog,{open:a,"aria-labelledby":"form-dialog-title",maxWidth:"sm",fullWidth:!0},r.a.createElement(p.Dialog,{open:i,onClose:E,"aria-describedby":"alert-dialog-description"},r.a.createElement(p.DialogContent,null,r.a.createElement(p.DialogContentText,{id:"alert-dialog-description"},"Your support request was sent successfully.")),r.a.createElement(p.DialogActions,null,r.a.createElement("center",null,r.a.createElement(p.Button,{onClick:E,color:"secondary",autoFocus:!0},"OK")))),r.a.createElement(p.DialogTitle,null,r.a.createElement("center",null,"Customer Support Request")),r.a.createElement(p.DialogContent,{style:{overflowX:"hidden"}},o.map((e,t)=>r.a.createElement(p.Typography,{variant:"body1",color:"error"},e)),r.a.createElement("br",null),r.a.createElement(p.Grid,{container:!0,spacing:0,justify:"center"},r.a.createElement(p.Grid,{item:!0,xs:3},r.a.createElement(p.Typography,{variant:"body1",display:"inline",style:{lineHeight:"30px"}},"Your e-mail address:")),r.a.createElement(p.Grid,{item:!0,xs:9},r.a.createElement(p.TextField,{margin:"normal",variant:"outlined",className:t.emailText,onChange:e=>m(e.currentTarget.value)}))),r.a.createElement(p.TextField,{margin:"normal",variant:"outlined",placeholder:"Please enter a description of your problem.",rows:4,fullWidth:!0,multiline:!0,onChange:e=>g(e.currentTarget.value)}),r.a.createElement("br",null),r.a.createElement(p.FormControlLabel,{control:r.a.createElement(p.Checkbox,{checked:h,onChange:e=>{b(e.currentTarget.checked)}}),label:"Include logs and data that might help us solve your problem."}),r.a.createElement("br",null)),r.a.createElement(p.DialogActions,null,r.a.createElement(p.Grid,{container:!0,spacing:0,justify:"center"},r.a.createElement(p.Grid,{item:!0,xs:3},r.a.createElement(p.Button,{variant:"contained",className:t.cancel,onClick:E,fullWidth:!0},"CANCEL")),r.a.createElement(p.Grid,{item:!0,xs:3},r.a.createElement(p.Button,{variant:"contained",className:t.send,color:"secondary",onClick:function(e){const t=s.ipcRenderer.sendSync("Support::SendRequest",d,u,h);if(null==t)l(!0);else{console.log(t);var a=new Array;t.hasOwnProperty("name")&&a.push("NAME: "+t.name),t.hasOwnProperty("email")&&a.push("EMAIL: "+t.email),t.hasOwnProperty("description")&&a.push("DESCRIPTION: "+t.description),0==a.length&&a.push("Unable to send. Server may be down."),c(a)}},fullWidth:!0},"SEND REPORT")))))}S.propTypes={classes:c.a.object.isRequired,open:c.a.bool.isRequired,onClose:c.a.func};var x=g()(e=>({cancel:{marginTop:-e.spacing.unit,marginBottom:e.spacing.unit,marginRight:"4px"},send:{marginTop:-e.spacing.unit,marginBottom:e.spacing.unit,marginLeft:"4px"},emailText:{width:"100%",height:30,marginTop:0}}))(S);function y(e){const{classes:t,open:a,yesNo:n,message:i,onOk:s,onCancel:l}=e;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Dialog,{open:a,"aria-labelledby":"form-dialog-title",maxWidth:"xs",fullWidth:!0},r.a.createElement(p.DialogContent,null,r.a.createElement(p.Typography,null,i),r.a.createElement("br",null)),1==n?r.a.createElement(p.DialogActions,null,r.a.createElement(p.Button,{variant:"contained",className:t.select,color:"secondary",onClick:s},"YES"),r.a.createElement(p.Button,{variant:"contained",className:t.select,color:"secondary",onClick:l},"NO")):r.a.createElement(p.DialogActions,null,r.a.createElement(p.Button,{variant:"contained",className:t.select,color:"secondary",onClick:s},"OK"))))}y.propTypes={classes:c.a.object.isRequired,open:c.a.bool.isRequired,yesNo:c.a.bool.isRequired,message:c.a.string.isRequired,onOk:c.a.func.isRequired,onCancel:c.a.func.isRequired};var w=g()(e=>({cancel:{marginTop:-e.spacing.unit,marginBottom:e.spacing.unit},select:{marginTop:-e.spacing.unit,marginBottom:e.spacing.unit},ghostList:{width:"100%"},switch:{marginLeft:-2*e.spacing.unit}}))(y);function v(e){const{classes:t,status:a}=e,[n,i]=r.a.useState(new Array),[o,c]=r.a.useState(!1),[d,u]=r.a.useState(!1),[g,h]=r.a.useState(!1),[E,S]=r.a.useState("");function y(){2==a&&(s.ipcRenderer.removeAllListeners("Jobs::JobSelected"),s.ipcRenderer.on("Jobs::JobSelected",e=>{u(!0)}),s.ipcRenderer.removeAllListeners("ShowJobSelection"),s.ipcRenderer.on("ShowJobSelection",(e,t)=>{i(t),c(!0)}),s.ipcRenderer.removeAllListeners("InvalidDDFile"),s.ipcRenderer.on("InvalidDDFile",(e,t)=>{S("DD file archive/manifest is corrupted.")}),s.ipcRenderer.send("File::OpenFileDialog"))}if(d)return r.a.createElement(l.Redirect,{to:"/milling"});function v(){return 2==a?r.a.createElement("img",{style:{marginTop:"20px",height:"14vh"},src:b.a.join(__dirname,"./static/img/run.png"),onMouseOver:e=>e.currentTarget.src=b.a.join(__dirname,"./static/img/run_hover.png"),onMouseOut:e=>e.currentTarget.src=b.a.join(__dirname,"./static/img/run.png"),onClick:y}):r.a.createElement("img",{style:{marginTop:"20px",height:"14vh"},src:b.a.join(__dirname,"./static/img/run.png")})}return r.a.createElement("section",{className:t.dashboardStyle},r.a.createElement(w,{open:E.length>0,message:E,close:e=>{S("")}}),r.a.createElement(m,null),r.a.createElement(f,{open:o,onClose:function(e){c(!1)},jobs:n}),r.a.createElement("div",{className:t.topLeft}),r.a.createElement("div",{className:t.topRight}),r.a.createElement("div",{className:t.main},r.a.createElement("div",{style:{position:"absolute",width:"100%"}},r.a.createElement("center",null,r.a.createElement("img",{src:b.a.join(__dirname,"./static/img/logo-white.png"),width:"88px",style:{marginTop:"-44px"}}))),r.a.createElement(p.Grid,{container:!0,spacing:8,direction:"row",justify:"center",alignItems:"center",style:{height:"100%"}},r.a.createElement(p.Grid,{item:!0,xs:4},r.a.createElement("center",null,r.a.createElement(p.Button,{style:{backgroundColor:"transparent"},id:"store"},r.a.createElement("img",{style:{marginTop:"20px",marginLeft:"30px",height:"14vh"},src:b.a.join(__dirname,"./static/img/store.png"),onMouseOver:e=>e.currentTarget.src=b.a.join(__dirname,"./static/img/store_hover.png"),onMouseOut:e=>e.currentTarget.src=b.a.join(__dirname,"./static/img/store.png"),onClick:()=>{s.shell.openExternal("https://ghostgunner.net/collections/featured-products")}})))),r.a.createElement(p.Grid,{item:!0,xs:4},r.a.createElement("center",null,2!=a?r.a.createElement(p.Tooltip,{disableFocusListener:!0,disableTouchListener:!0,title:"Disabled until GhostGunner is connected"},r.a.createElement("span",null,r.a.createElement(p.Button,{className:t.runButton,style:{backgroundColor:"transparent"},disabled:!0,id:"run"},v()))):r.a.createElement(p.Button,{className:t.runButton,style:{backgroundColor:"transparent"},disabled:!1,id:"run"},v()))),r.a.createElement(p.Grid,{item:!0,xs:4},r.a.createElement("center",null,r.a.createElement(p.Button,{style:{backgroundColor:"transparent"}},r.a.createElement("img",{style:{marginTop:"20px",marginRight:"30px",height:"14vh"},src:b.a.join(__dirname,"./static/img/help.png"),onMouseOver:e=>e.currentTarget.src=b.a.join(__dirname,"./static/img/help_hover.png"),onMouseOut:e=>e.currentTarget.src=b.a.join(__dirname,"./static/img/help.png"),onClick:function(){h(!0)}})))))),r.a.createElement(x,{open:g,onClose:()=>{h(!1)}}))}v.propTypes={classes:c.a.object.isRequired,status:c.a.number.isRequired};var C=g()(e=>({main:{width:"80%",height:"45%",marginTop:"auto",marginBottom:"auto",marginLeft:"auto",marginRight:"auto",position:"absolute",borderLeft:"solid 3px #969696",borderRight:"solid 3px #969696",borderBottom:"solid 3px #969696"},dashboardStyle:{backgroundImage:"url(./static/img/back-texture.jpg)",backgroundSize:"cover",overflow:"hidden",width:"100%",height:"100%",position:"fixed",left:0,top:0,z:-1,flex:1,justifyContent:"center",alignItems:"center",display:"flex",verticalAlign:"middle"},topLeft:{width:"calc(40% - 60px)",height:"45%",marginTop:"auto",marginBottom:"auto",marginLeft:"calc(-20% - 30px)",position:"absolute",borderTop:"solid 3px #969696"},topRight:{width:"calc(40% - 60px)",height:"45%",marginTop:"auto",marginBottom:"auto",marginLeft:"calc(20% + 30px)",position:"absolute",borderTop:"solid 3px #969696"},runButton:{"&:disabled":{opacity:.5}}}))(v);class R extends r.a.Component{constructor(){super(),this.selectedRef=r.a.createRef()}componentWillReceiveProps(e){setTimeout(()=>{this.selectedRef.scrollIntoView({behavior:"smooth",block:"center"})})}render(){const{classes:e,steps:t,selectedStep:a}=this.props;return r.a.createElement("div",{className:e.root},r.a.createElement(p.List,{component:"nav",className:e.list},t.map((t,n)=>(function(t,n,i){var s=null;return a===n&&(s=r.a.createElement("div",{style:{float:"left",clear:"both"},ref:e=>{i.selectedRef=e}})),r.a.createElement(p.ListItem,{button:!0,disableGutters:!0,key:n,selected:a===n,className:e.item},r.a.createElement(p.ListItemText,{disableTypography:!0},s,r.a.createElement(p.Typography,{noWrap:!0,className:e.itemText},t.Title)))})(t,n,this))))}}R.propTypes={classes:c.a.object.isRequired,steps:c.a.array.isRequired,selectedStep:c.a.number.isRequired};var T=Object(i.withStyles)(e=>({root:{width:"100%",height:"calc(100% - 40px)"},list:{width:"100%",height:"100%",overflow:"auto",backgroundColor:"#9f9f9f",webkitAppearance:"none",mozAppearance:"none",appearance:"none",border:"0px",padding:"0px"},item:{"&:hover":{height:"35px",backgroundColor:"black",border:"0px",marginLeft:"0px",marginRight:"0px"},"&:focus":{height:"35px",backgroundColor:"black",border:"0px",marginLeft:"0px",marginRight:"0px"},height:"35px",backgroundColor:"black",border:"0px",marginLeft:"0px",marginRight:"0px"},itemText:{marginLeft:"0px",marginRight:"0px",fontFamily:"Arial",opacity:.87,fontSize:"14px",color:"#ffffff"}}))(R);class k extends r.a.Component{constructor(){super(),this.state={imageSelected:!0,zoom:!1,readWrites:[]},this.gcodeEnd=null,this.updateReadWrites=this.updateReadWrites.bind(this)}shouldComponentUpdate(e,t){return this.props.selectedStep!=e.selectedStep||(this.state.imageSelected!=t.imageSelected||(this.state.zoom!=t.zoom||(this.props.millingInProgress!=e.millingInProgress||this.state.readWrites!=t.readWrites)))}componentDidUpdate(e){this.props.selectedStep!==e.selectedStep&&this.setState({imageSelected:!0,zoom:!1,readWrites:[]})}updateReadWrites(e,t){t.length>0&&this.setState({readWrites:[...this.state.readWrites,...t]})}render(){const{classes:e,selectedStep:t,millingInProgress:a}=this.props;return s.ipcRenderer.removeAllListeners("Jobs::ReadWrites"),s.ipcRenderer.on("Jobs::ReadWrites",this.updateReadWrites),r.a.createElement("div",{className:e.root},r.a.createElement(p.Grid,{container:!0,spacing:0},r.a.createElement(p.Grid,{item:!0,xs:3}),r.a.createElement(p.Grid,{item:!0,xs:3},r.a.createElement(p.Button,{fullWidth:!0,variant:"contained",color:!0===this.state.imageSelected?"secondary":"primary",size:"small",onClick:function(e){this.setState({imageSelected:!0})}.bind(this),style:{borderRadius:"0px",padding:"0px"}},"IMAGE")),r.a.createElement(p.Grid,{item:!0,xs:3},r.a.createElement(p.Button,{fullWidth:!0,variant:"contained",color:!0===this.state.imageSelected?"primary":"secondary",size:"small",onClick:function(e){null!=t.GCode&&this.setState({imageSelected:!1})}.bind(this),style:{borderRadius:"0px",padding:"0px"}},"RAW")),r.a.createElement(p.Grid,{item:!0,xs:3})),r.a.createElement("br",null),1==(n=this).state.imageSelected?1==n.state.zoom?r.a.createElement(p.Dialog,{open:n.state.zoom,"aria-labelledby":"form-dialog-title",maxWidth:"md",onClose:()=>{n.setState({zoom:!1})},fullWidth:!0},r.a.createElement(p.Button,{onClick:()=>{n.setState({zoom:!1})}},r.a.createElement("img",{style:{width:"auto",height:"auto"},src:"data:image/jpeg;base64,"+t.Image}))):r.a.createElement(p.Button,{onClick:()=>{n.setState({zoom:!0})}},r.a.createElement("img",{style:{width:"100%",height:"auto"},src:"data:image/jpeg;base64,"+t.Image})):r.a.createElement("div",{className:e.gcodes},function(e,a){if(e)return a.map((e,t)=>r.a.createElement(p.Typography,{variant:"body1",color:"textPrimary",key:t,align:"left",style:{marginLeft:"10px"}},e.TYPE," : ",e.VALUE));var n=[];return null!=t.GCode&&(n=t.GCode),n.map((e,t)=>r.a.createElement(p.Typography,{variant:"body1",color:"textPrimary",key:t,align:"left",style:{marginLeft:"10px"}},e))}(a,n.state.readWrites),r.a.createElement("div",{style:{float:"left",clear:"both"},ref:e=>{n.gcodeEnd=e}})),function(e){a&&null!=e.gcodeEnd&&!e.state.imageSelected&&e.gcodeEnd.scrollIntoView({behavior:"auto",block:"center"})}(this));var n}}k.propTypes={classes:c.a.object.isRequired,selectedStep:c.a.object.isRequired,millingInProgress:c.a.bool.isRequired};var F=Object(i.withStyles)(e=>({root:{width:"100%",height:"100%"},gcodes:{width:"100%",height:"calc(100% - 50px)",overflow:"auto",backgroundColor:"black",position:"relative",border:"#FFFFFF 1px solid",color:"#FFFFFF"}}))(k),N=a(16),G=a.n(N),L=a(10);Object(i.makeStyles)({root:{width:"calc(100%-48px)",padding:24}});const D=Object(i.withStyles)({thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid #de235b","&$focused, &:hover":{boxShadow:`0px 0px 0px 8px ${Object(L.fade)("#de235b",.16)}`},"&$activated":{boxShadow:`0px 0px 0px 12px ${Object(L.fade)("#de235b",.16)}`},"&$jumped":{boxShadow:`0px 0px 0px 12px ${Object(L.fade)("#de235b",.16)}`}},track:{backgroundColor:"#de235b",height:8},trackAfter:{backgroundColor:"#d0d7dc"},focused:{},activated:{},jumped:{}})(G.a);class j extends r.a.Component{constructor(){super(),this.state={feedRate:s.ipcRenderer.sendSync("Settings::GetFeedRate"),settings:s.ipcRenderer.sendSync("Settings::GetSettings")}}componentDidUpdate(e){this.props.selectedStep!==e.selectedStep&&this.setState({feedRate:s.ipcRenderer.sendSync("Settings::GetFeedRate"),settings:s.ipcRenderer.sendSync("Settings::GetSettings")})}render(){if(null==this.state.settings||1!=this.state.settings.enable_slider)return"";const e=this.state.settings.maxFeedRate;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Typography,{variant:"h5",color:"textPrimary"},this.state.feedRate,"%"),r.a.createElement(p.Paper,{style:{width:"calc(100%-48px)",padding:24}},r.a.createElement(D,{value:this.state.feedRate/(e/100),"aria-labelledby":"label",onChange:(t,a)=>{const n=Math.round(a*(e/100));s.ipcRenderer.send("Settings::SetFeedRate",n),this.setState({feedRate:n})}})))}}j.propTypes={selectedStep:c.a.number.isRequired};var I=j;function M(e){const{classes:t,open:a,onClose:n}=e;return r.a.createElement(p.Dialog,{open:a,"aria-labelledby":"form-dialog-title",maxWidth:"xs",fullWidth:!0,PaperProps:{style:{overflow:"hidden"}}},r.a.createElement(p.DialogTitle,null,r.a.createElement("center",null,"START MOVING")),r.a.createElement(p.DialogContent,null,r.a.createElement(p.Typography,{color:"textPrimary",align:"center"},"The machine is about to start moving. Are you sure you",r.a.createElement("br",null),"want to continue?")),r.a.createElement(p.DialogActions,null,r.a.createElement(p.Grid,{container:!0,spacing:8,justify:"center"},r.a.createElement(p.Grid,{item:!0,xs:3},r.a.createElement(p.Button,{variant:"contained",className:t.cancel,onClick:e=>{n(!1)},fullWidth:!0},"CANCEL")),r.a.createElement(p.Grid,{item:!0,xs:3},r.a.createElement(p.Button,{variant:"contained",className:t.select,color:"secondary",onClick:e=>{n(!0)},fullWidth:!0},"START")))))}M.propTypes={classes:c.a.object.isRequired,open:c.a.bool.isRequired,onClose:c.a.func};var P=g()(e=>({cancel:{marginTop:-e.spacing.unit,marginBottom:e.spacing.unit},select:{marginTop:-e.spacing.unit,marginBottom:e.spacing.unit}}))(M);class B extends r.a.Component{constructor(){super(),this.state={steps:s.ipcRenderer.sendSync("Jobs::GetSteps"),selectedStepIndex:0,selectedStep:s.ipcRenderer.sendSync("Jobs::GetStep",0),previousMillingStep:0,showImage:!0,showStartMilling:!1,goBack:!1,millingProgress:-1,showAlert:!1,alertMessage:""}}componentDidMount(){s.ipcRenderer.send("DD_SetCurrentPage","Milling"),s.ipcRenderer.sendSync("Walkthrough::ShouldDisplay","Milling")&&(window.ShowMillingWalkthrough(),s.ipcRenderer.send("Walkthrough::SetShowWalkthrough","Milling",!1))}progress(e){if(100===e.state.millingProgress)clearInterval(e.timer),e.showNextStep(e);else{const t=s.ipcRenderer.sendSync("Jobs::GetProgress",e.state.selectedStepIndex);null!=t.error?(clearInterval(e.timer),e.setState({millingProgress:-1,showAlert:!0,alertMessage:t.error,selectedStepIndex:0,selectedStep:s.ipcRenderer.sendSync("Jobs::GetStep",0),previousMillingStep:0})):e.setState({millingProgress:t.percentage})}}showNextStep(e){const t=e.state.selectedStepIndex+1;t<e.state.steps.length?e.setState({showStartMilling:!1,millingProgress:-1,selectedStepIndex:t,selectedStep:s.ipcRenderer.sendSync("Jobs::GetStep",t)}):e.setState({goBack:!0})}showPrevStep(e){const t=e.state.selectedStepIndex-1;e.setState({showStartMilling:!1,millingProgress:-1,selectedStepIndex:t,selectedStep:s.ipcRenderer.sendSync("Jobs::GetStep",t)})}skipToNextMillingStep(e){const t=e.state.selectedStep.next_milling_step;e.setState({showStartMilling:!1,millingProgress:-1,selectedStepIndex:t,selectedStep:s.ipcRenderer.sendSync("Jobs::GetStep",t)})}render(){const{classes:e}=this.props;function t(e){null!=this.state.selectedStep.GCode?this.setState({showStartMilling:!0}):this.showNextStep(this)}function a(e){s.ipcRenderer.send("Jobs::EmergencyStop"),clearInterval(this.timer),this.setState({millingProgress:-1,selectedStepIndex:0,selectedStep:s.ipcRenderer.sendSync("Jobs::GetStep",0),previousMillingStep:0,showAlert:!0,alertMessage:"Emergency stop was pressed. Resetting job."})}return 1==this.state.goBack&&0==this.state.showAlert?(this.state.millingProgress>=0&&(s.ipcRenderer.send("Jobs::EmergencyStop"),clearInterval(this.timer)),s.ipcRenderer.send("DD_SetCurrentPage","Dashboard"),r.a.createElement(l.Redirect,{to:"/"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(w,{open:this.state.showAlert,message:this.state.alertMessage,yesNo:this.state.goBack,onOk:e=>{this.setState({showAlert:!1})},onCancel:e=>{this.setState({showAlert:!1,goBack:!1})}}),r.a.createElement("section",{className:e.millingStyle},r.a.createElement("section",{id:"steps",className:e.stepsList},r.a.createElement(p.Button,{style:{marginTop:"5px"},onClick:e=>{!function(e){0==e.state.selectedStepIndex&&-1==e.state.millingProgress?e.setState({goBack:!0}):e.setState({showAlert:!0,alertMessage:"You will lose your progress if you navigate away. Are you sure you want to continue?",goBack:!0})}(this)}},r.a.createElement("img",{style:{height:"16px"},src:b.a.join(__dirname,"./static/img/back-to-main.png")})),r.a.createElement(T,{steps:this.state.steps,selectedStep:this.state.selectedStepIndex}),r.a.createElement(p.Grid,{container:!0,spacing:0},r.a.createElement(p.Grid,{item:!0,xs:4},r.a.createElement(p.Button,{color:"secondary",disabled:!function(e){if(-1==e.state.millingProgress){if(0==e.state.selectedStepIndex)return!1;if(e.state.selectedStepIndex-1>e.state.previousMillingStep)return!0}return!1}(this),className:e.prev,onClick:function(e){this.showPrevStep(this)}.bind(this)},"< Prev")),r.a.createElement(p.Grid,{item:!0,xs:4},r.a.createElement("center",null,r.a.createElement(p.Typography,{className:e.stepNumber},"Step ",this.state.selectedStepIndex+1,"/",this.state.steps.length))),r.a.createElement(p.Grid,{item:!0,xs:4},r.a.createElement(p.Button,{color:"secondary",disabled:(i=this,!(-1==i.state.millingProgress)),className:e.next,onClick:t.bind(this)},"Next >"))),r.a.createElement(p.Button,{color:"secondary",disabled:!function(e){return null!=e.state.selectedStep.next_milling_step}(this),className:e.next,onClick:function(e){this.skipToNextMillingStep(this)}.bind(this)},"Skip to Next Milling Step >")),r.a.createElement("section",{id:"middle_section",className:e.middle},r.a.createElement(P,{open:this.state.showStartMilling,onClose:function(e){e?(this.setState({millingProgress:0,showStartMilling:!1,previousMillingStep:this.state.selectedStepIndex}),s.ipcRenderer.send("Jobs::StartMilling",this.state.selectedStepIndex),this.timer=setInterval(this.progress,100,this)):this.setState({showStartMilling:!1})}.bind(this)}),r.a.createElement("div",{className:e.instructions},r.a.createElement(p.Typography,{color:"textPrimary",variant:"subtitle1",style:{textTransform:"uppercase"}},r.a.createElement("b",null," ",this.state.selectedStep.Title," ")),r.a.createElement("br",null),r.a.createElement(p.Typography,{color:"textPrimary"},this.state.selectedStep.Prompt)),r.a.createElement("div",{className:e.warning},(n=this).state.millingProgress>=0?r.a.createElement(p.LinearProgress,{variant:"determinate",color:"secondary",style:{height:"15px"},value:n.state.millingProgress}):"",function(e){return null!=e.state.selectedStep&&null!=e.state.selectedStep.GCode&&-1==e.state.millingProgress?r.a.createElement(p.Typography,{align:"center",color:"error"},"Warning!",r.a.createElement("br",null),"GG will move after pressing start"):""}(this)),r.a.createElement("div",{className:e.actions},function(e){return-1==e.state.millingProgress?r.a.createElement(p.IconButton,{onClick:t.bind(e)},r.a.createElement("img",{style:{height:"90px"},onMouseOver:e=>e.currentTarget.src=b.a.join(__dirname,"./static/img/next_hover.png"),onMouseOut:e=>e.currentTarget.src=b.a.join(__dirname,"./static/img/next.png"),src:b.a.join(__dirname,"./static/img/next.png")})):r.a.createElement(p.IconButton,{onClick:a.bind(e)},r.a.createElement("img",{style:{height:"80px"},src:b.a.join(__dirname,"./static/img/stop_circle.png")}))}(this)),function(t){return t.state.millingProgress>=0?r.a.createElement("div",{className:e.slider},r.a.createElement(I,{selectedStep:t.state.selectedStepIndex})):""}(this)),r.a.createElement("section",{id:"image",className:e.right},r.a.createElement(F,{selectedStep:this.state.selectedStep,millingInProgress:-1!=this.state.millingProgress}))));var n,i}}B.propTypes={classes:c.a.object.isRequired};var A=g()(e=>({millingStyle:{backgroundImage:"url(./static/img/milling-background.jpg)",backgroundSize:"cover",overflow:"hidden",width:"100%",height:"100%",position:"fixed",left:0,top:0,z:-1,flex:1,justifyContent:"left",alignItems:"left",display:"flex",verticalAlign:"middle"},stepsList:{width:"calc(20% - 20px)",height:"calc(100% - 120px)",marginTop:"30px",marginLeft:"10px",position:"fixed"},middle:{width:"calc(38% - 20px)",height:"calc(100% - 110px)",marginTop:"60px",marginLeft:"calc(20% + 10px)",position:"fixed"},instructions:{width:"100%",height:"50%",postion:"fixed"},warning:{height:"40px",textAlign:"center"},slider:{position:"absolute",bottom:"20px",width:"100%",height:"40px",textAlign:"center"},actions:{textAlign:"center"},right:{width:"calc(42% - 20px)",height:"calc(100% - 160px)",marginTop:"110px",marginLeft:"calc(58% + 10px)"},prev:{float:"left",padding:"5px"},next:{float:"right",padding:"5px"},stepNumber:{marginTop:"6px",opacity:.87,fontSize:"14px",color:"#9f9f9f"}}))(B);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function W(e){const{status:t}=e;return r.a.createElement(l.HashRouter,null,r.a.createElement(d,null,r.a.createElement(l.Switch,null,r.a.createElement(l.Route,{exact:!0,path:"/",render:e=>r.a.createElement(C,_({},e,{status:t}))}),r.a.createElement(l.Route,{exact:!0,path:"/milling",component:A}))))}W.propTypes={status:c.a.number.isRequired};var O=W,q=a(11),U=a(12),z=a(17),V=a.n(z);function J(e){const{classes:t,status:a}=e,n=Object(p.createMuiTheme)({palette:{primary:{main:"#069076"},secondary:U.yellow,error:U.red},typography:{useNextVariants:!0,body1:{fontSize:14}}});function i(){var e="error";return 1==a?e="secondary":2==a&&(e="primary"),e}return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.MuiThemeProvider,{theme:n},r.a.createElement(p.Fab,{variant:"extended",disabled:!0,align:"left",className:t.status,id:"GGStatus"},r.a.createElement(V.a,{color:i(),style:{width:"18px"}}),r.a.createElement(p.Typography,{variant:"body1",color:i()},r.a.createElement("b",null,r.a.createElement("span",{className:t.leftRightPadding,style:{color:"#ffffff"}},"GG Status:"),(s="Not Connected",1==a?s="Connecting":2==a&&(s="Connected"),s))))));var s}J.propTypes={classes:c.a.object.isRequired,status:c.a.number.isRequired};var H=Object(i.withStyles)(e=>({leftRightPadding:{padding:e.spacing.unit},status:{marginLeft:0,paddingLeft:0}}))(J);class $ extends r.a.Component{constructor(){super(),this.state={showUpdates:!1,showUpdater:!1,updatesLoaded:!1,selectedIndex:-1,availableFirmware:[],uploadStatus:-1},this.uploadFirmwareStatusIntervalId=null,this.onAvailableFirmware=this.onAvailableFirmware.bind(this),this.updateFirmwareUploadStatus=this.updateFirmwareUploadStatus.bind(this),this.closeUpdater=this.closeUpdater.bind(this)}closeUpdater(){this.setState({showUpdater:!1,updatesLoaded:!1,showUpdates:!1,selectedIndex:-1,uploadStatus:-1})}updateFirmwareUploadStatus(){if(this.state.showUpdater){const e=s.ipcRenderer.sendSync("Firmware::GetFirmwareUploadStatus");e!=this.state.uploadStatus&&(e<0?(clearInterval(this.uploadFirmwareStatusIntervalId),this.setState({uploadStatus:e})):100==e?(clearInterval(this.uploadFirmwareStatusIntervalId),this.setState({uploadStatus:e})):this.setState({uploadStatus:e}))}else clearInterval(this.uploadFirmwareStatusIntervalId)}onAvailableFirmware(e,t){this.setState({availableFirmware:t})}render(){const{classes:e,refreshFirmwareVersion:t}=this.props;function a(e){if(this.state.selectedIndex>=0){const e=this.state.availableFirmware[this.state.selectedIndex];if(s.ipcRenderer.sendSync("Firmware::UploadFirmware",e.version,e.description,e.files))return console.log("SUCCESS"),this.uploadFirmwareStatusIntervalId=setInterval(this.updateFirmwareUploadStatus,50),void this.setState({showUpdater:!0})}this.closeUpdater()}function n(e){this.setState({selectedIndex:e.target.selectedIndex})}return this.state.showUpdates&&(this.state.updatesLoaded||(s.ipcRenderer.removeAllListeners("Firmware::UpdatesAvailable"),s.ipcRenderer.on("Firmware::UpdatesAvailable",this.onAvailableFirmware),s.ipcRenderer.send("Firmware::GetAvailableFirmwareUpdates"),this.setState({updatesLoaded:!0}))),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Button,{onClick:()=>{this.setState({showUpdates:!0})},variant:"contained",color:"secondary",size:"small",fullWidth:!0},"Update Firmware"),r.a.createElement(p.Dialog,{open:this.state.showUpdates,"aria-labelledby":"form-dialog-title",maxWidth:"sm",fullWidth:!0},r.a.createElement(p.DialogTitle,null,r.a.createElement("center",null,this.state.showUpdater?"Uploading Firmware":"Firmware Selection")),r.a.createElement(p.DialogContent,null,(i=this).state.showUpdater?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Grid,{container:!0,spacing:8},r.a.createElement(p.Grid,{item:!0,xs:3},r.a.createElement("img",{src:b.a.join(__dirname,"./static/img/computer.png"),width:"128",height:"72",style:{marginTop:"15px"}})),r.a.createElement(p.Grid,{item:!0,xs:6},r.a.createElement("br",null),r.a.createElement(p.LinearProgress,{variant:"determinate",color:"secondary",style:{height:"30px",marginTop:"5px"},value:i.state.uploadStatus})),r.a.createElement(p.Grid,{item:!0,xs:3},r.a.createElement("img",{src:b.a.join(__dirname,"./static/img/mill.png"),width:"90",height:"90"})))):"",function(t){return t.state.showUpdater?"":r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Typography,null,"Select firmware version to download."),r.a.createElement("select",{size:"5",onChange:n.bind(t),className:e.firmwareList},t.state.availableFirmware.map((e,t)=>r.a.createElement("option",{key:t},e.description))),r.a.createElement("br",null))}(this)),r.a.createElement(p.DialogActions,null,function(t){return t.state.showUpdater?-1==t.state.uploadStatus||100==t.state.uploadStatus?r.a.createElement(p.Grid,{container:!0,spacing:8,justify:"center"},r.a.createElement(p.Grid,{item:!0,xs:3},r.a.createElement(p.Button,{variant:"contained",className:e.select,color:"secondary",onClick:t.closeUpdater,fullWidth:!0},"Close"))):r.a.createElement("br",null):r.a.createElement(p.Grid,{container:!0,spacing:8,justify:"center"},r.a.createElement(p.Grid,{item:!0,xs:3},r.a.createElement(p.Button,{variant:"contained",className:e.cancel,onClick:t.closeUpdater,fullWidth:!0},"CANCEL")),r.a.createElement(p.Grid,{item:!0,xs:3},r.a.createElement(p.Button,{variant:"contained",className:e.select,color:"secondary",onClick:a.bind(t),fullWidth:!0},"SELECT")))}(this))));var i}}$.propTypes={classes:c.a.object.isRequired,refreshFirmwareVersion:c.a.func};var Y=g()(e=>({cancel:{marginTop:-e.spacing.unit,marginBottom:e.spacing.unit},select:{marginTop:-e.spacing.unit,marginBottom:e.spacing.unit},firmwareList:{width:"100%"},firmwareText:{width:"calc(100% - 6px)"}}))($);function K(e){const{classes:t,disabled:a}=e,[n,i]=r.a.useState(!1),[l,o]=r.a.useState(!1),[c,d]=r.a.useState(0),[m,u]=r.a.useState(!1),[g,h]=r.a.useState(0),[E,f]=r.a.useState(""),[S,x]=r.a.useState("");function y(){var e=s.ipcRenderer.sendSync("Firmware::GetFirmwareVersion");f(e.ddVersion),x(e.grblVersion)}function w(){i(!1)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Tooltip,{disableHoverListener:!a,disableFocusListener:!0,disableTouchListener:!0,title:"Disabled while machine is running"},r.a.createElement("span",null,r.a.createElement(p.Fab,{variant:"extended","aria-label":"Settings",disabled:a,onClick:function(){if(!a){i(!0);var e=s.ipcRenderer.sendSync("Settings::GetSettings");o(e.pauseAfterGCode),d(e.timeout),u(e.enable_slider),h(e.maxFeedRate),y()}},className:t.settingsButton,size:"small",id:"settings"},r.a.createElement("img",{src:b.a.join(__dirname,"./static/img/settings-cog.png"),className:t.settingsCog}),r.a.createElement("img",{src:b.a.join(__dirname,"./static/img/settings.png"),className:t.settingsText})))),r.a.createElement(p.Dialog,{open:n,onClose:w,"aria-labelledby":"form-dialog-title",maxWidth:"sm",PaperProps:{className:t.paper}},r.a.createElement(p.DialogTitle,{id:"form-dialog-title"},r.a.createElement("center",null,"Settings")),r.a.createElement(p.DialogContent,null,r.a.createElement(p.FormControlLabel,{control:r.a.createElement(p.TextField,{margin:"normal",variant:"outlined",className:t.timeoutText,type:"number",defaultValue:c,onChange:e=>d(e.currentTarget.valueAsNumber)}),label:"Default Timeout in Seconds"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(p.Typography,{color:"textPrimary"},"Firmware Version: ",r.a.createElement("b",null,""==E?"Not Connected":"DD: "+E+" GRBL: "+S)),r.a.createElement(Y,{refreshFirmwareVersion:()=>{y()}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(p.FormControlLabel,{control:r.a.createElement(p.Checkbox,{checked:m,onChange:e=>u(e.currentTarget.checked)}),label:"Enable Feedrate Percentage"}),r.a.createElement(p.FormControl,{component:"fieldset",className:t.radioGroup},r.a.createElement(p.FormLabel,{component:"legend",className:t.feedRatePercentage},"FeedRate Percentage"),r.a.createElement(p.RadioGroup,null,r.a.createElement(p.FormControlLabel,{control:r.a.createElement(p.Radio,{checked:100==g,onChange:e=>h(100)}),disabled:!m,label:"30% - 100%",className:t.radio}),r.a.createElement(p.FormControlLabel,{control:r.a.createElement(p.Radio,{checked:300==g,onChange:e=>h(300)}),disabled:!m,label:"30% - 300%",className:t.radio}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{style:{textAlign:"right",width:"100%"}},r.a.createElement(p.Button,{variant:"contained",className:t.cancel,onClick:w},"CANCEL"),r.a.createElement(p.Button,{variant:"contained",className:t.save,color:"secondary",onClick:function(){s.ipcRenderer.send("Settings::UpdateSettings",l,c,m,g),i(!1)}},"SAVE CHANGES")))))}K.propTypes={classes:c.a.object.isRequired,disabled:c.a.bool.isRequired};var X=Object(i.withStyles)(e=>({settingsButton:{paddingTop:0,paddingBottom:0,paddingLeft:e.spacing.unit,paddingRight:e.spacing.unit,backgroundColor:"transparent","&:disabled":{opacity:.5}},settingsCog:{width:"25px",height:"25px",marginRight:e.spacing.unit,padding:0,marginTop:0},settingsText:{width:"62px",height:"28px",objectFit:"contain",padding:0,margin:0},timeoutText:{width:100,height:30,marginLeft:2*e.spacing.unit,marginRight:2*e.spacing.unit,marginTop:e.spacing.unit},cancel:{marginRight:e.spacing.unit},save:{marginLeft:e.spacing.unit},radio:{marginLeft:e.spacing.unit,marginTop:0,marginBottom:0},radioGroup:{width:"100%",backgroundColor:"black",borderStyle:"solid",borderColor:"white",borderWidth:"2px",borderRadius:"2px"},feedRatePercentage:{marginLeft:e.spacing.unit,padding:e.spacing.unit,backgroundColor:"black"}}))(K);function Q(e){const{classes:t,disabled:a}=e,[n,i]=r.a.useState(!1),[l,o]=r.a.useState(null),[c,d]=r.a.useState(-1);function m(e){const t=s.ipcRenderer.sendSync("Ghost::GetAvailableGhosts");console.log(t),o(t);for(var a=0;a<t.length;a++)1==t[a].selected&&d(a);i(!0)}return r.a.createElement(r.a.Fragment,null,a?null:r.a.createElement(p.Button,{color:"secondary",onClick:m,className:t.switch},"(",r.a.createElement("span",{style:{textDecoration:"underline"}},"Select"),")"),r.a.createElement(p.Dialog,{open:n,"aria-labelledby":"form-dialog-title",maxWidth:"sm",fullWidth:!0,PaperProps:{style:{overflow:"hidden"}}},r.a.createElement(p.DialogTitle,null,r.a.createElement("center",null,"Choose Ghost Gunner")),r.a.createElement(p.DialogContent,null,r.a.createElement(p.Typography,null,"Select a Ghost Gunner."),r.a.createElement("select",{size:"5",onChange:function(e){d(e.target.selectedIndex)},className:t.ghostList,value:c},function(){if(null!=l)return l.map((e,t)=>r.a.createElement("option",{key:t}," SN: ",e.serial_number," PATH: ",e.path));return null}()),r.a.createElement("br",null)),r.a.createElement(p.DialogActions,null,r.a.createElement(p.Grid,{container:!0,spacing:8,justify:"center"},r.a.createElement(p.Grid,{item:!0,xs:3},r.a.createElement(p.Button,{variant:"contained",className:t.cancel,onClick:function(e){i(!1)},fullWidth:!0},"CANCEL")),r.a.createElement(p.Grid,{item:!0,xs:3},r.a.createElement(p.Button,{variant:"contained",className:t.select,color:"secondary",onClick:function(e){c>=0&&s.ipcRenderer.send("Ghost::ChooseGhost",l[c].path,l[c].serial_number),i(!1)},fullWidth:!0},"SELECT"))))))}Q.propTypes={classes:c.a.object.isRequired,disabled:c.a.bool.isRequired};var Z=g()(e=>({cancel:{marginTop:-e.spacing.unit,marginBottom:e.spacing.unit},select:{marginTop:-e.spacing.unit,marginBottom:e.spacing.unit},ghostList:{width:"100%"},switch:{marginLeft:-2*e.spacing.unit,color:"white"}}))(Q);function ee(e){const{classes:t,open:a,onClose:n}=e,[i,l]=r.a.useState(""),[o,c]=r.a.useState("");return r.a.createElement(p.Dialog,{open:a,"aria-labelledby":"form-dialog-title",maxWidth:"sm",fullWidth:!0,PaperProps:{style:{overflow:"hidden"}}},r.a.createElement(p.DialogTitle,null,r.a.createElement("center",null,"View Logs")),r.a.createElement(p.DialogContent,null,r.a.createElement("br",null),r.a.createElement("textarea",{type:"text",disabled:!0,overflow:"auto",rows:"12",cols:"78",value:function(){if(0==o.length)c(s.ipcRenderer.sendSync("Logs::GetLogFile"));else{if(0!=i.length)return i;s.ipcRenderer.removeAllListeners("File::FileOpened"),s.ipcRenderer.on("File::FileOpened",function(e,t){null!=t&&t.length>0?l(t+"\nClick Open/Save to see the full log."):l("No logs found.")}),s.ipcRenderer.send("File::ReadFile",o)}return"Loading"}(),className:t.logOutput}),r.a.createElement("br",null)),r.a.createElement(p.DialogActions,null,r.a.createElement(p.Grid,{container:!0,spacing:8,justify:"center"},r.a.createElement(p.Grid,{item:!0,xs:3},r.a.createElement(p.Button,{variant:"contained",className:t.cancel,onClick:function(e){n(e)},fullWidth:!0},"CLOSE")),r.a.createElement(p.Grid,{item:!0,xs:3},r.a.createElement(p.Button,{variant:"contained",className:t.open,color:"secondary",onClick:function(e){s.shell.openExternal(o),n(e)},fullWidth:!0},"OPEN/SAVE")))))}ee.propTypes={classes:c.a.object.isRequired,open:c.a.bool.isRequired,onClose:c.a.func};var te=g()(e=>({cancel:{marginTop:-e.spacing.unit,marginBottom:e.spacing.unit},open:{marginTop:-e.spacing.unit,marginBottom:e.spacing.unit},logOutput:{width:"calc(100% - 6px)"}}))(ee);function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class ne extends r.a.Component{constructor(){super(),this.state={openDialog:!1,openMenu:!1,openLogViewer:!1},this.anchor=r.a.createRef(),this.handleToggleMenu=this.handleToggleMenu.bind(this),this.handleCloseMenu=this.handleCloseMenu.bind(this),this.handleOpenDialog=this.handleOpenDialog.bind(this),this.handleCloseDialog=this.handleCloseDialog.bind(this),this.handleShowLogs=this.handleShowLogs.bind(this),this.handleCloseLogViewer=this.handleCloseLogViewer.bind(this)}handleToggleMenu(){this.setState({openMenu:!this.state.openMenu})}handleCloseMenu(e){this.anchor.contains(e.target)||this.setState({openMenu:!1})}handleOpenDialog(){this.setState({openDialog:!0,openMenu:!1})}handleCloseDialog(){this.setState({openDialog:!1})}handleShowLogs(){this.setState({openMenu:!1,openLogViewer:!0})}handleCloseLogViewer(){this.setState({openMenu:!1,openLogViewer:!1})}render(){const{classes:e,disabled:t}=this.props;function a(e){const t=s.ipcRenderer.sendSync("DD_GetCurrentPage");"Dashboard"==t?window.ShowDashboardWalkthrough():"Milling"==t&&window.ShowMillingWalkthrough(),this.handleCloseMenu(e)}function n(e){s.shell.openExternal(b.a.join(__dirname,"/doc/GG2Manual.pdf")),this.handleCloseMenu(e)}function i(e){s.shell.openExternal("https://ghostgunner.net/"),this.handleCloseMenu(e)}function l(){this.handleOpenDialog()}function o(){this.handleShowLogs()}return t&&!0===this.state.openMenu&&this.setState({openMenu:!1}),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Tooltip,{disableHoverListener:!t,disableFocusListener:!0,disableTouchListener:!0,title:"Disabled while machine is running"},r.a.createElement("span",null,r.a.createElement(p.Fab,{variant:"extended","aria-label":"Support",onClick:this.handleToggleMenu,className:e.supportButton,disabled:t,size:"small",buttonRef:e=>{this.anchor=e},id:"support"},r.a.createElement("img",{src:b.a.join(__dirname,"./static/img/support_button.png"),className:e.supportImg})))),r.a.createElement(p.Popper,{open:this.state.openMenu,anchorEl:this.anchor,transition:!0,disablePortal:!0},({TransitionProps:t,placement:s})=>r.a.createElement(p.Grow,ae({},t,{id:"menu-list-grow",style:{transformOrigin:"bottom"===s?"center top":"center bottom"}}),r.a.createElement(p.Paper,{className:e.paper},r.a.createElement(p.ClickAwayListener,{onClickAway:this.handleCloseMenu},r.a.createElement(p.MenuList,null,r.a.createElement(p.MenuItem,{className:e.menuItem,onClick:a.bind(this)},"'How to' Walkthrough"),r.a.createElement(p.MenuItem,{className:e.menuItem,onClick:n.bind(this)},"View Manual"),r.a.createElement(p.MenuItem,{className:e.menuItem,onClick:i.bind(this)},"Visit Support Page"),r.a.createElement(p.MenuItem,{className:e.menuItem,onClick:l.bind(this)},"Customer Support Request"),r.a.createElement(p.MenuItem,{className:e.menuItem,onClick:o.bind(this)},"Show Logs")))))),r.a.createElement(x,{open:this.state.openDialog,onClose:this.handleCloseDialog}),r.a.createElement(te,{open:this.state.openLogViewer,onClose:this.handleCloseLogViewer}))}}ne.propTypes={classes:c.a.object.isRequired,disabled:c.a.bool.isRequired};var re=Object(i.withStyles)(e=>({root:{display:"flex"},paper:{marginBottom:"5px",border:"#FFFFFF 1px solid"},menuItem:{"&:hover":{backgroundColor:e.palette.primary.dark}},supportButton:{paddingTop:0,paddingBottom:0,paddingLeft:e.spacing.unit,paddingRight:e.spacing.unit,backgroundColor:"transparent","&:disabled":{opacity:.5}},supportImg:{width:"100px",height:"25px",objectFit:"contain",padding:0,margin:0}}))(ne);function ie(e){const{classes:t,status:a,milling:n}=e;return r.a.createElement("footer",{className:t.root},r.a.createElement(p.AppBar,{position:"fixed",className:t.appBar},r.a.createElement(p.Toolbar,null,r.a.createElement(p.Grid,{container:!0,spacing:0,className:t.root,alignItems:"center"},r.a.createElement(p.Grid,{item:!0,xs:4},r.a.createElement(H,{status:a}),r.a.createElement(Z,{disabled:n})),r.a.createElement(p.Grid,{item:!0,xs:8},r.a.createElement("div",{className:t.right},r.a.createElement(p.Button,{color:"secondary",onClick:function(){s.shell.openExternal("https://ghostgunner.net/")}},"GhostGunner.net"),r.a.createElement(X,{disabled:n}),r.a.createElement(re,{disabled:n})))))))}ie.propTypes={classes:c.a.object.isRequired,status:c.a.number.isRequired,milling:c.a.bool.isRequired};var se=Object(i.withStyles)(e=>({root:{marginBottom:3*e.spacing.unit,flexGrow:1},appBar:{top:"auto",height:39,bottom:0,backgroundImage:"url(./static/img/bottom-bar.png)",backgroundSize:"cover",backgroundPosition:"center"},right:{float:"right"}}))(ie),le=a(18);a.d(t,"default",function(){return ce});const oe=Object(i.createMuiTheme)({palette:{secondary:{main:"#069076"},primary:{main:"#ffffff",dark:"#888888",dark:"#333333"},text:{primary:"#ffffff",secondary:"#cccccc",disabled:"#444444"},background:{paper:"#000000"}},typography:{useNextVariants:!0,fontFamily:['"Lato"',"sans-serif"].join(","),body1:{fontSize:14}},props:{MuiButtonBase:{disableRipple:!0},MuiDialog:{TransitionProps:{enter:!1,exit:!1,timeout:0}}},overrides:{MuiFormControl:{root:{backgroundColor:"#555555"}},MuiDialog:{paper:{border:"#FFFFFF 1px solid"}}}});class ce extends n.Component{constructor(){super(),this.state={ghostGunnerStatus:0,millingInProgress:!1}}componentWillMount(){if(!this.props.data){document.title="DDCut v"+le.a;new q.Titlebar({backgroundColor:q.Color.fromHex("#333333"),icon:"./static/img/DD_icon.ico",menu:null,titleHorizontalAlignment:"left"})}}componentDidMount(){s.ipcRenderer.sendSync("Walkthrough::ShouldDisplay","Dashboard")&&(window.ShowDashboardWalkthrough(),s.ipcRenderer.send("Walkthrough::SetShowWalkthrough","Dashboard",!1))}render(){return s.ipcRenderer.removeAllListeners("DD_UpdateGGStatus"),s.ipcRenderer.on("DD_UpdateGGStatus",function(e,t){t!=this.state.ghostGunnerStatus&&this.setState({ghostGunnerStatus:t})}.bind(this)),s.ipcRenderer.removeAllListeners("Milling::Status"),s.ipcRenderer.on("Milling::Status",function(e,t){t!=this.state.millingInProgress&&this.setState({millingInProgress:t})}.bind(this)),document.getElementsByClassName("window-appicon")[0].style.width="20px",document.getElementsByClassName("window-appicon")[0].style.height="20px",document.getElementsByClassName("window-appicon")[0].style.backgroundSize="20px 20px",document.getElementsByClassName("window-appicon")[0].style.marginLeft="5px",n.createElement(n.Fragment,null,n.createElement(i.MuiThemeProvider,{theme:oe},n.createElement(O,{status:this.state.ghostGunnerStatus}),n.createElement(se,{status:this.state.ghostGunnerStatus,milling:this.state.millingInProgress})))}}}]);
//# sourceMappingURL=app.js.map